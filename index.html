<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Salary Stopwatch</title>
  <style>
    /* — your existing styles up through .stats… unchanged — */

    /* 2×2 layout for stats */
    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
      padding: 10px;
      background: rgba(255,255,255,0.5);
      border-radius: 8px;
      transition: background .3s;
    }
    /* rest of your CSS unchanged */
  </style>
</head>
<body>

  <!-- … your config screen unchanged … -->

  <div class="container hidden" id="stopwatch">
    <div class="stopwatch-display">
      <div class="time-display" id="timeDisplay">00:00:00</div>
      <div id="earnings" class="earnings">£0.00</div>
    </div>

    <div class="stats">
      <div class="stat-item">
        <div class="stat-value" id="perSecond">£0.00</div>
        <div class="stat-label">Per Second</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="perMinute">£0.00</div>
        <div class="stat-label">Per Minute</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="perHour">£0.00</div>
        <div class="stat-label">Per Hour</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="perDay">£0.00</div>
        <div class="stat-label">Per Day</div>
      </div>
    </div>

    <div style="display:flex;justify-content:center;gap:10px">
      <button class="btn btn-secondary" onclick="pauseResume()" id="pauseBtn">⏸️ Pause</button>
      <button class="btn btn-secondary" onclick="resetStopwatch()">🔄 Reset</button>
    </div>
  </div>

  <script>
    let frame, baseOffsetEarnings = 0, baseOffsetSeconds = 0;
    let ratePerSec = 0, startTimestamp;
    let paused = false, pauseStart, pausedAccum = 0;

    function startStopwatch() {
      const mode = document.getElementById('mode').value;
      const now = new Date();
      let startInput, startDate, endInput, totalWorkSeconds;

      if (mode === 'salary') {
        // … your salary-mode setup (ratePerSec calculation) …

        // figure out today’s start time:
        startInput = document.getElementById('startTime').value;    // e.g. "09:00"
      } else {
        // … hourly-mode setup …
        startInput = document.getElementById('startTimeH').value;
      }

      // build a Date() for today at the “startInput” hour/minute
      const [sh, sm] = startInput.split(':').map(x => parseInt(x,10));
      startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), sh, sm);
      totalWorkSeconds = Math.max(0, (now - startDate)/1000);

      // initial offsets:
      baseOffsetSeconds = totalWorkSeconds;
      baseOffsetEarnings = totalWorkSeconds * ratePerSec;

      // populate your per‑second/minute/hour/day stat blocks here…

      // hide config, show stopwatch
      document.getElementById('config').classList.add('hidden');
      document.getElementById('stopwatch').classList.remove('hidden');

      // kick off the RAF loop
      startTimestamp = performance.now();
      pausedAccum = 0;
      paused = false;
      document.getElementById('pauseBtn').innerText = '⏸️ Pause';
      updateFrame();
    }

    function updateFrame() {
      frame = requestAnimationFrame(ts => {
        if (!paused) {
          // elapsed runtime
          const runSeconds = (ts - startTimestamp - pausedAccum)/1000;
          const elapsed = baseOffsetSeconds + runSeconds;
          const totalEarn = baseOffsetEarnings + (runSeconds * ratePerSec);

          // update the clock display
          const hh = String(Math.floor(elapsed/3600)).padStart(2,'0');
          const mm = String(Math.floor((elapsed%3600)/60)).padStart(2,'0');
          const ss = String(Math.floor(elapsed%60)).padStart(2,'0');
          document.getElementById('timeDisplay').innerText = `${hh}:${mm}:${ss}`;

          // update earnings
          document.getElementById('earnings').innerText =
            currencySymbol + totalEarn.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});
        }
        updateFrame();
      });
    }

    // … your pauseResume() and resetStopwatch() unchanged …
  </script>
</body>
</html>
