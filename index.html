<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salary Stopwatch</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin:0; min-height:100vh;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg,#667eea,#764ba2);
      display:flex; align-items:center; justify-content:center;
      color:#333;
    }
    .container {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border-radius:20px; padding:30px;
      max-width:500px; width:90%;
    }
    h1 {
      text-align:center; margin-bottom:20px;
      font-size:1.8em; font-weight:400;
    }
    .row {
      display: flex; gap:10px; margin-bottom:15px;
    }
    .row .input-group { flex:1; }
    .input-group { margin-bottom:15px; }
    label {
      display:block; margin-bottom:5px;
      font-weight:600; font-size:.9em; color:#555;
      text-transform:uppercase; letter-spacing:.5px;
    }
    input, select {
      width:100%; padding:10px;
      border:2px solid #e1e5e9; border-radius:8px;
      font-size:1em; transition:all .2s;
    }
    input:focus, select:focus {
      outline:none; border-color:#667eea;
      box-shadow:0 0 0 3px rgba(102,126,234,0.2);
    }
    .btn {
      width:100%; padding:12px;
      font-size:1em; font-weight:600;
      border:none; border-radius:8px;
      text-transform:uppercase; cursor:pointer;
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:#fff; margin-top:10px;
    }
    .stopwatch-display { text-align:center; margin:25px 0; }
    .time-display { font-size:1.2em; color:#666; }
    .earnings {
      font-size:2.8em; font-weight:700;
      color:#28a745; text-shadow:0 2px 4px rgba(40,167,69,0.2);
    }
    .stats {
      display:grid; grid-template-columns:repeat(auto-fit,minmax(100px,1fr));
      gap:10px; margin:20px 0; padding:10px;
      background:rgba(255,255,255,0.5); border-radius:8px;
    }
    .stat-item {
      text-align:center; padding:8px; background:#fff;
      border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.05);
    }
    .stat-value { font-size:1.2em; font-weight:700; color:#667eea; }
    .stat-label { font-size:.75em; color:#666; text-transform:uppercase; }
    .hidden { display:none; }
  </style>
</head>
<body>

  <div class="container" id="config">
    <h1>Salary Stopwatch</h1>

    <!-- Setup Mode + Display Style -->
    <div class="row">
      <div class="input-group">
        <label for="mode">Setup Mode</label>
        <select id="mode">
          <option value="hourly">Hourly Mode</option>
          <option value="salary">Salary Mode</option>
        </select>
      </div>
      <div class="input-group">
        <label for="viewMode">Display Style</label>
        <select id="viewMode">
          <option value="simple">Modern</option>
          <option value="digital">Digital</option>
          <option value="flip">Flip</option>
        </select>
      </div>
    </div>

    <!-- Hourly Mode Fields -->
    <div id="hourlyFields">
      <div class="row">
        <div class="input-group">
          <label for="hourlyRate">Hourly Rate</label>
          <input type="number" id="hourlyRate" placeholder="e.g. 15.00" min="0" step="0.01" />
        </div>
        <div class="input-group">
          <label for="currencyH">Currency</label>
          <select id="currencyH">
            <option value="¬£">¬£</option>
            <option value="$">$</option>
            <option value="‚Ç¨">‚Ç¨</option>
            <option value="¬•">¬•</option>
          </select>
        </div>
      </div>
      <!-- Start/End times (full width) -->
      <div class="row">
        <div class="input-group">
          <label for="startTimeH">Start Time</label>
          <input type="time" id="startTimeH" value="09:00" />
        </div>
        <div class="input-group">
          <label for="endTimeH">End Time</label>
          <input type="time" id="endTimeH" value="17:00" />
        </div>
      </div>
    </div>

    <!-- Salary Mode Fields -->
    <div id="salaryFields" class="hidden">
      <div class="row">
        <div class="input-group">
          <label for="salaryAnnual">Annual Salary</label>
          <input type="number" id="salaryAnnual" placeholder="e.g. 50000" min="0" step="100" />
        </div>
        <div class="input-group">
          <label for="currencyS">Currency</label>
          <select id="currencyS">
            <option value="¬£">¬£</option>
            <option value="$">$</option>
            <option value="‚Ç¨">‚Ç¨</option>
            <option value="¬•">¬•</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div class="input-group">
          <label for="startTime">Today's Start</label>
          <input type="time" id="startTime" value="09:00" />
        </div>
        <div class="input-group">
          <label for="endTime">Today's End</label>
          <input type="time" id="endTime" value="17:00" />
        </div>
      </div>
    </div>

    <button class="btn" onclick="startStopwatch()">Start Earning!</button>
  </div>

  <div class="container hidden" id="stopwatch">
    <div class="stopwatch-display">
      <div class="time-display" id="timeDisplay">00:00:00</div>
      <div id="earnings" class="earnings">¬£0.00</div>
    </div>
    <div class="stats">
      <div class="stat-item"><div class="stat-value" id="perSecond">¬£0.00</div><div class="stat-label">Per Second</div></div>
      <div class="stat-item"><div class="stat-value" id="perMinute">¬£0.00</div><div class="stat-label">Per Minute</div></div>
      <div class="stat-item"><div class="stat-value" id="perHour">¬£0.00</div><div class="stat-label">Per Hour</div></div>
      <div class="stat-item"><div class="stat-value" id="perDay">¬£0.00</div><div class="stat-label">Per Day</div></div>
    </div>
    <div style="display:flex;justify-content:center;gap:10px">
      <button class="btn btn-secondary" onclick="pauseResume()" id="pauseBtn">‚è∏Ô∏è Pause</button>
      <button class="btn btn-secondary" onclick="resetStopwatch()">üîÑ Reset</button>
    </div>
  </div>

  <script>
    // Mode toggle
    const modeEl = document.getElementById('mode'),
          hourlyFields = document.getElementById('hourlyFields'),
          salaryFields = document.getElementById('salaryFields');

    modeEl.addEventListener('change', ()=>{
      if(modeEl.value==='salary'){
        hourlyFields.classList.add('hidden');
        salaryFields.classList.remove('hidden');
      } else {
        salaryFields.classList.add('hidden');
        hourlyFields.classList.remove('hidden');
      }
    });

    // Stopwatch vars
    let frame, startTS, paused=false, pauseStart, pausedDur=0;
    let ratePerSec=0, initOffset=0;

    function formatNum(n){
      return n.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});
    }

    function startStopwatch(){
      const view = document.getElementById('viewMode').value;
      let currency, start, end, now=new Date(), workedSec=0, dayHours=8;

      if(modeEl.value==='hourly'){
        const hr = parseFloat(document.getElementById('hourlyRate').value);
        currency = document.getElementById('currencyH').value;
        if(isNaN(hr)||hr<0) return alert('Enter valid hourly rate');
        ratePerSec = hr/3600;
        // compute offset from startTimeH
        start = document.getElementById('startTimeH').value.split(':');
        end   = document.getElementById('endTimeH').value.split(':');
        const sd = new Date(now); sd.setHours(...start);
        const ed = new Date(now); ed.setHours(...end);
        workedSec = Math.max(0, Math.min((now-sd)/1000,(ed-sd)/1000));
        dayHours = (ed-sd)/3600000;
        initOffset = workedSec*ratePerSec;
      } else {
        const sal = parseFloat(document.getElementById('salaryAnnual').value);
        currency = document.getElementById('currencyS').value;
        if(isNaN(sal)||sal<0) return alert('Enter valid salary');
        const st = document.getElementById('startTime').value.split(':');
        const et = document.getElementById('endTime').value.split(':');
        const sd = new Date(now); sd.setHours(...st);
        const ed = new Date(now); ed.setHours(...et);
        if(ed<=sd) return alert('End must be after start');
        workedSec = (now>sd)?Math.min((now-sd)/1000,(ed-sd)/1000):0;
        dayHours = (ed-sd)/3600000;
        ratePerSec = sal/(52*dayHours*3600*5);
        initOffset = workedSec*ratePerSec;
      }

      // stats
      document.getElementById('perSecond').innerText = currency+formatNum(ratePerSec);
      document.getElementById('perMinute').innerText = currency+formatNum(ratePerSec*60);
      document.getElementById('perHour').innerText = currency+formatNum(ratePerSec*3600);
      document.getElementById('perDay').innerText = currency+formatNum(ratePerSec*3600*dayHours);

      // show
      document.getElementById('config').classList.add('hidden');
      const sw = document.getElementById('stopwatch');
      sw.classList.remove('hidden');
      document.getElementById('earnings').className='earnings '+view;

      startTS = performance.now(); pausedDur=0; paused=false;
      document.getElementById('pauseBtn').innerText='‚è∏Ô∏è Pause';
      updateLoop(currency);
    }

    function updateLoop(curr){
      frame = requestAnimationFrame(ts=>{
        if(!paused){
          const elapsed=(ts-startTS-pausedDur)/1000;
          const total=initOffset+elapsed*ratePerSec;
          document.getElementById('earnings').innerText=curr+formatNum(total);
          document.getElementById('timeDisplay').innerText=new Date(elapsed*1000).toISOString().substr(11,8);
        }
        updateLoop(curr);
      });
    }

    function pauseResume(){
      if(!paused){
        paused=true; pauseStart=performance.now();
        document.getElementById('pauseBtn').innerText='‚ñ∂Ô∏è Resume';
      } else {
        paused=false; pausedDur+=performance.now()-pauseStart;
        document.getElementById('pauseBtn').innerText='‚è∏Ô∏è Pause';
      }
    }

    function resetStopwatch(){
      cancelAnimationFrame(frame);
      document.getElementById('stopwatch').classList.add('hidden');
      document.getElementById('config').classList.remove('hidden');
    }
  </script>
</body>
</html>
